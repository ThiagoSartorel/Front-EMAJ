import Head from 'next/head'
import Image from 'next/image'
import { useForm } from "react-hook-form";
import styles from '../styles/Home.module.css'

function exibirInput(num) {

   if (typeof document !== 'undefined') {
    var senha = document.getElementById("DivSenha");
    var codigo = document.getElementById("DivCod");
    senha.hidden = true;
    codigo.hidden = true;

    switch (num) {

      case 1:
        senha.hidden = false;
        codigo.hidden = true;
        return

      case 2:
        senha.hidden = true;
        codigo.hidden = false;
        return
    }
  } 
}

function exibirErro(msg) {
  //Dando erro de hidratação
/*   if (typeof document !== 'undefined') {
    var erro = document.getElementById("erro");
    erro.innerHTML = msg;
  } */
}

function login(body) {
  var msgErro = "<p>Usuário ou senha incorreto!</p>"
  console.log("entrou no login")
  console.log(body)
  return msgErro;
}

export default function Home() {
  const { register, handleSubmit } = useForm()
  return (
    <div className={styles.container}>
      <Head>
        <title>Login EMAJ</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.telaLogin}>
        <div className={styles.imagemLogin}>
        </div>
        <div className={styles.formLogin}>
          <h1 className={styles.tituloLogin}>LOGIN</h1>
          <form className={styles.formulario} onSubmit={handleSubmit(login)}>
            <label>Matricula</label><br />
            <input className={styles.inputLogin} name="ra" {...register("ra")} required></input>
            {exibirInput(2)}
            {exibirErro("Mensagem de erro")}
            <div id="DivSenha">
              <label>Senha</label><br />
              <input className={styles.inputLogin} type="password" name="password" {...register("password")}></input>
            </div>
            <div id="DivCod">
              <label>Codigo</label><br />
              <input className={styles.inputLogin} name="cod" {...register("cod")}></input>
              <span>Um codigo de confirmação foi enviado para seu email.</span>
            </div>
            
            <button type="submit" className={styles.btnLoginavancar}>Avançar</button>
          </form>
        </div>
      </main>

      <footer className={styles.footer}>
        <h4>NIU</h4>
      </footer>
    </div>
  )
}
